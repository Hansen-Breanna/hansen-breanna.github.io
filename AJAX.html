<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>JavaScript Objects</title>
    <link rel = "stylesheet" type = "text/css" href = "styles/style.css"/>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-9ZC1DBETDC"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-9ZC1DBETDC');
    </script>
    
</head>
<body>
    <header>
        <div class="menu-bars">
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
        </div>
        <button class="menu-icon" type="button" onclick="myNav()"></button>
        <h1>AJAX</h1>
    </header>

    <nav id="ham-menu">
        <div id="nav-menu"></div>
    </nav>
    
    <main>
        <section>
            <h2>Link List</h2>
            <ul>    
                <li><a href="https://www.w3schools.com/js/js_ajax_intro.asp" target="_blank">Ajax Introduction</a></li>
                <li><a href="https://www.youtube.com/watch?v=RDo3hBL1rfA" target="_blank">JavaScript and AJAX tutorial: What is AJAX?</a></li>
                <li><a href="https://code-maven.com/ajax-request-for-json-data">Ajax request for JSON data with vanilla JavaScript</a></li>
                <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/getAllResponseHeaders">XMLHttpRequest.getAllResponseHeaders()</a></li>
                <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Response/headers">Response.headers</a></li>
            </ul>
        </section>

        <section>
            <h2>Intro</h2>
            <p>AJAX stands for <strong>A</strong>synchronous <strong>J</strong>avaScript <strong>A</strong>nd <strong>X</strong>ML. AJAX is what enables us to be able to pull 
                data and send it to the server after a page is already loaded.</p>
        </section>

        <section>
            <h2>Full AJAX Request Code</h2>

<!-- Pre Code -->
<pre><code>let apiURL = 'https://swapi.co/api/';
    let starWars = new XMLHttpRequest;
    starWars.open('GET', apiURL, true);
    starWars.send();
    starWars.onload =  function () {
        let starWarsInfo = 
            JSON.parse(starWars.responseText);
    }</code></pre>
            <h3>Example</h3>
            <p>An AJAX request was used to access the Star Wars API. The category names were then referenced from the JSON file.</p>
            <h4>Star Wars Categories</h4>
            <div id="starWarsInfo"></div>
        </section>
        
        <section>
            <h2>AJAX XMLHttp</h2>
            <p>The XMLHttpRequest is an object.</p> To do a request, both the web page and the file it is trying to load must be on the same server.

<!-- Pre Code --><pre><code>Syntax:
variable = new XMLHttpRequest();</code></pre>

            <section>
                <h3>XMLHttpRequest Object Methods</h3>
                <ol>
                    <li>new XMLHttpRequest() - creates a new request object.</li>
                    <li>abort() - cancels current request.</li>
                    <li>getAllResponseHeaders() - returns header information.<br>
                        Syntax:<br>
                        <code>var headers = XMLHttpRequest.getAllResponseHeaders();</code><br>
                        Working Example:<br>
                        <code><span id="AllResponseHeaders"></span></code>
                    </li>
                    <li>getAllResponseHeader() - returns specific header information.<br>
                        Syntax: <br>
                        <code>var header = XMLHttpRequest.getResponseHeader();</code><br>
                        Working Example:<br>
                        <code><span id="ResponseHeader"></span></code></li>
                    <li>setRequestHeader() - Adds a label/value pair to the header to be sent.</li>
                </ol>
            </section>

            <section>
                <h3>Object Properties</h3>
                <ol>
                    <li>onreadystatechange - defines function to be called when property changes</li>
                    <li>readystate- status of the XMLHttpRequest<br>
                        <ul>
                            <li>0: request not initilized</li>
                            <li>1: server connection established</li>
                            <li>2: request received</li>
                            <li>3: processing request</li>
                            <li>4: request finished and response is ready</li>
                        </ul></li>
                    <li>responseText - returns data as a string</li>
                    <li>status - number of the request (404, etc.)</li>
                    <li>statusText - returns "OK" or "Not Found"</li>
                </ol>
            </section>
        </section>

        <section>
            <h2>AJAX Request</h2>
            <p>Both the <code>open()</code> and <code>send()</code> methods are used to send data to the server. Always use post when sending large amounts of information or
            sensitive information.</p>
            <ol>
                <li>open(<i>method, url, async, user, psw</i>)<br>
                    method - GET or POST<br>
                    async - true or false<br>
                    user - optional username<br>
                    psw - optional password</li>
                <li>send() - Sends the request to the server for GET.</li>
                <li>send(string) - Send the request to the server for POST.</li>
            </ol>

            <section>
                <h3>GET</h3>
                <p>The first example shows how to do a GET request. The second shows how to send information with the GET method.</p>
<!-- Pre Code -->
<pre><code>variable.open('GET', url, true);
variable.send();

Add information:
variable.open('GET', 'url.com?name=Jim', true);
variable.send();
</code></pre>
            </section>

            <section>
                <h3>POST</h3>
                <!-- Pre Code -->
                <pre><code></code></pre>
            </section>
        </section>

        <section>
            <h2>AJAX Response</h2>
        </section>

    </main>

    <footer></footer>

    <script src="scripts/styles.js"></script>
    <script src="scripts/toggleham.js"></script>
    <script src="scripts/ajax.js"></script>
    <script src="scripts/json-scripts.js"></script>

</body>
</html>